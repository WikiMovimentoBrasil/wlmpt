const osm_map=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:1,attribution:'&copy; <a href="https://openstreetmap.org/copyright">'+credits+"</a>"}),blueIcon=L.AwesomeMarkers.icon({icon:"fa-solid fa-landmark",markerColor:"darkblue",iconColor:"white",prefix:"fas"});var map=L.map("map",{layers:[osm_map]}).setMaxBounds(bounds),marker=L.marker({lat:-90,lon:0},{icon:blueIcon,draggable:!0});function postCoordinates(){var a=$("#addCoordinates"),t={item:a.data("item"),lat:a.data("lat"),lon:a.data("lon")};$.ajax({url:"/postCoordinates",type:"POST",data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(a){alert(a)},error:function(){alert('{{ _("Erro") }}')}})}$("td button").click(function(){$("#addModal").modal("show"),$("#addCoordinates").data("item",this.dataset.item),$("#monument").html(this.dataset.label),$("#local").html(this.dataset.local+"<br>"),$("#address").html(this.dataset.address+"<br>")}),$("#addModal").on("shown.bs.modal",function(){map.invalidateSize(),map.fitBounds(bounds)}),$("#addModal").on("hidden.bs.modal",function(){marker.setLatLng({lat:-90,lon:0}),map.removeLayer(marker),localizar.state("locate"),localizar.button.style.backgroundColor="#007bff",$("#addCoordinates").prop("disabled",!0)}),$(document).ready(function(){$("#localFilter").on("keyup",function(){var a=$(this).val().toLowerCase();$("#monuments_table tr").filter(function(){$(this).toggle($(this).find("td:nth-child(2) a:nth-child(3)").text().toLowerCase().indexOf(a)>-1)})})}),$("#latlngConfirm").on("click",function(){let a=$("#latlng").val();const t=new RegExp("(\\d+)(º|°)(\\d+)'(.*)\"(N|S) (\\d+)(º|°)(\\d+)'(.*)\"(W|E|L|O)"),o=new RegExp("(.*)(,|, | )(.*)");if(t.test(a)){let o=t.exec(a),e=-1,l=-1;"N"===o[5]&&(e=1),"E"!==o[10]&&"L"!==o[10]||(l=1);parseFloat(o[1]),parseFloat(o[3]),parseFloat(o[4]),parseFloat(o[6]),parseFloat(o[8]),parseFloat(o[9])}else if(o.test(a)){let t=o.exec(a);t[1],t[2]}console.log(nCoordinate),console.log(wCoordinate)});const locate=L.control.locate({flyTo:!0,returnToPrevBounds:!0,icon:"locate fa-solid fa-location-dot",iconElementTag:"i",strings:{title:whereAmIMsg}}).addTo(map);var localizar=L.easyButton({states:[{stateName:"locate",icon:"fa-solid fa-map-pin",title:localizeMsg,onClick:function(a,t){t.addLayer(marker),a.state("cancel"),a.button.style.backgroundColor="#990000",t.on("mousemove",function(a){marker.setLatLng(a.latlng)}),t.on("click",function(a){marker.setLatLng(a.latlng),t.off("mousemove");var o=$("#addCoordinates");o.data("lat",a.latlng.lat),o.data("lon",a.latlng.lng),o.prop("disabled",!1)})}},{stateName:"cancel",icon:"fa-solid fa-xmark",title:cancelMsg,onClick:function(a,t){marker.setLatLng([-90,0]),t.removeLayer(marker),a.state("locate"),a.button.style.backgroundColor="#007bff",t.off("click"),$("#addCoordinates").prop("disabled",!0)}}]}).addTo(map);localizar.button.style.backgroundColor="#007bff",localizar.button.style.color="#FFFFFF";